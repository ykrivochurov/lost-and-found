<div class="home-wrapper animate-switch-container">
    <div class="left-panel animate-show" ng-show="!isCollapsed">
        <div class="right-panel-show" ng-click="collapse()"></div>
        <div class="top-logo">
            <img class="img-logo" src="/img/logo_01.png">
            <img class="text-logo" src="/img/logo2.png">

            <div class="hr">&nbsp;</div>
            <span class="city">{{currentCity}}</span>
        </div>
        <div class="start-form clearfix">
            <input type="text" name="where" placeholder="Где" ng-model="laf.where">
            <input type="text" name="what" placeholder="Что" ng-model="laf.what"
                   typeahead="thing for thing in whatDict | filter:$viewValue | limitTo:8">
            <input type="text" name="when" placeholder="Когда" datepicker-popup="{{dateFormat}}" show-button-bar="false"
                   show-weeks="false" datepicker-append-to-body="true" ng-model="laf.when">

            <div class="buttons clearfix">
                <button class="l-button" ng-click="createItem('lost')">Я ПОТЕРЯЛ</button>
                <button class="r-button" ng-click="createItem('found')">Я НАШЕЛ</button>
            </div>
        </div>
        <div class="show-list clearfix"><div class="dashed-text" ng-click="collapse()">Перейти к списку объявлений</div></div>
        <div class="musor">&nbsp;</div>
    </div>
    <div id="map-panel" class="map-panel"></div>
    <div class="right-panel animate-show" ng-show="isCollapsed">
        <div class="right-panel-hide" ng-click="collapse()"></div>
        <div class="top-buttons clearfix">
            <button ng-click="lafListSelect('lost')" class="lost-b active">
                <span>Утеряно</span>
            </button>
            <button ng-click="lafListSelect('found')" class="found-b">
                <span>Найдено</span>
            </button>
        </div>
        <div class="search-block left-margin">
            <span ng-click="clearCategorySelection()">
                <img src="/img/icon_menu2.png" alt="" tooltip="Вернуться к списку категорий"
                     tooltip-placement="right" tooltip-trigger="mouseenter">
            </span>
            <input type="text" placeholder="Подробности" ng-model="searchQuery"
                   typeahead="thing for thing in whatDict | filter:$viewValue | limitTo:8">
        </div>
        <div class="selected-category left-margin clearfix" tooltip="Вернуться к объявлений" ng-show="selectedCategory != null" ng-click="goToSelectedCategory()"><span class="name">{{selectedCategory.name}}</span>
            <span class="tag" ng-show="selectedTag != null">/&nbsp;&nbsp;{{selectedTag.name}}&nbsp;&nbsp;{{selectedTag.count}}</span>
        </div>
        <div class="details-block left-margin" ng-show="selectedItem != null">
            <div class="prev-laf-item" ng-show="selectedItem.hasPrev" ng-click="openNextItem(selectedItem, true)"><img src="/img/top.png" alt="prev"></div>
            <div class="creation-date">
                <span class="day">{{selectedItem.creationDate | date:'dd'}}</span>
                <span class="month">{{selectedItem.creationDate | date:'MMMM'}}</span>
                <span class="year">{{selectedItem.creationDate | date:'yyyy'}}</span>
            </div>
            <div class="clearfix">
                <div class="picture">
                    <span class="img-va-helper"></span>
                    <img src="/img/sample.png">
                </div>
                <div class="what">{{selectedItem.what}}</div>
            </div>
            <div class="when-where-section clearfix">
                <div class="icon-label-b where-b">
                    <!--todo утеряно/найдено-->
                    <div class="label-b">где утеряно</div>
                    <div class="text-b">{{selectedItem.where}}</div>
                </div>
                <div class="icon-label-b when-b">
                    <!--todo утеряно/найдено-->
                    <div class="label-b">когда утеряно</div>
                    <div class="text-b">
                        <span class="day">{{selectedItem.when | date:'dd'}}</span>
                        <span class="month">{{selectedItem.when | date:'MMMM'}}</span>
                        <span class="year">{{selectedItem.when | date:'yyyy'}}</span>
                    </div>
                </div>
            </div>
            <div class="tags-section" ng-show="selectedItem.tags.length > 0">
                <span class="tags-label">Tags:</span>
                <span class="tags">{{joinTags(selectedItem.tags)}}</span>
            </div>
            <div class="contacts-section clearfix">
                <div class="clearfix">
                    <div class="icon-label-b person-b">
                        <div class="label-b">контактное лицо</div>
                        <div class="text-b">{{selectedItem.author.firstName}}&nbsp;{{selectedItem.author.lastName}}</div>
                    </div>
                </div>
                <div class="clearfix">
                    <div class="icon-label-b phone-b" ng-show="selectedItem.author.phone">
                        <div class="text-b">{{selectedItem.author.phone}}</div>
                    </div>
                    <div class="icon-label-b email-b {{selectedItem.author.phone ? 'float-right' : 'float-left'}}">
                        <div class="text-b">{{selectedItem.author.email}}</div>
                    </div>
                </div>
                <div class="icon-label-b pen-b">
                    <div class="text-b">Написать личное сообщение</div>
                </div>
            </div>
            <div class="share-section">
                <span>Поделиться</span>
                <img src="/img/share_twitt.png" alt="Twitter">
                <img src="/img/share_vkontacte.png" alt="ВКонтакте">
                <img src="/img/share_facebook.png" alt="Facebook">
            </div>
            <div class="next-laf-item" ng-show="selectedItem.hasNext" ng-click="openNextItem(selectedItem, false)"><img src="/img/bottom.png" alt="prev"></div>
        </div>
        <div class="nano" style="max-height: 600px;" ng-show="showSelectedCategory">
            <div class="content scroll-content" ng-show="showSelectedCategory">
                <div class="laf-item left-margin" ng-repeat="item in lostAndFoundItems" ng-click="openItem(item)">
                    <div class="when">
                        <span class="day">{{item.creationDate | date:'dd'}}</span>
                        <span class="month">{{item.creationDate | date:'MMMM'}}</span>
                        <span class="year">{{item.creationDate | date:'yyyy'}}</span>
                        <span class="money" ng-show="item.money" tooltip="За вознаграждение!" tooltip-placement="left">&nbsp;</span>
                    </div>
                    <div class="what" ng-click="openItem(item)">{{item.what}}</div>
                    <!--todo каждый тэг отдельно кликабельный!!-->
                    <div><span class="tags-label" ng-show="item.tags.length > 0">Tags:</span><span class="tags"
                                                                                                   ng-show="item.tags.length > 0">{{joinTags(item.tags)}}</span>
                    </div>
                </div>
                <!--todo кнопка исчо или безконечный скролл-->
            </div>
            <div class="nano-bottom"></div>
        </div>
        <div class="nano" style="height: {{categoriesBlockHeight}};" ng-show="showCategoriesList">
            <div class="scroll-content" ng-show="showCategoriesList">
                <div ng-repeat="category in categories" class="clearfix category-section left-margin">
                    <div class="category" ng-click="selectCategoryAndTag(category, null)">{{category.name}}</div>
                    <div class="tag-w-count clearfix" ng-repeat="tag in category.tags"
                         ng-click="selectCategoryAndTag(category, tag)">
                    <span class="tag-icon">
                        <span class="tag-icon-tc">
                            <img src="{{getIconByTag(tag.name)}}" alt="">
                        </span>
                    </span>
                    <span class="tag-name">
                        <span class="tag-name-tc">
                            <span>{{tag.name}}&nbsp;<span class="tag-count">{{tag.count}}</span></span>
                        </span>
                    </span>
                    </div>
                </div>
            </div>
            <div class="nano-bottom"></div>
        </div>
    </div>
</div>

<script type="text/ng-template" id="create-item-modal.html">

    <div class="ci-popup creation-form {{itemType}}">
        <div class="creation-date">
            <span class="day">{{laf.creationDate | date:'dd'}}</span>
            <span class="month">{{laf.creationDate | date:'MMMM'}}</span>
            <span class="year">{{laf.creationDate | date:'yyyy'}}</span>
        </div>
        <div class="clearfix">
            <div class="what">
                <textarea ng-model="laf.what" placeholder="Что"></textarea>
            </div>
            <div class="picture-block">
                <span>Загрузить фото</span>
                <div class="picture">
                    <span class="img-va-helper"></span>
                    <img src="/img/icon_camera.png">
                </div>
            </div>
        </div>
        <div class="clearfix">
            <div class="where">
                <span>где {{itemType == 'lost' ? 'утеряно' : 'найдено'}}</span>
                <div>
                    <input type="text" ng-model="laf.where" placeholder="Где">
                </div>
            </div>
            <div class="when">
                <span>когда {{itemType == 'lost' ? 'утеряно' : 'найдено'}}</span>
                <div>
                    <input type="text" ng-model="laf.when" placeholder="Когда" datepicker-popup="{{dateFormat}}" show-button-bar="false"
                           show-weeks="false" datepicker-append-to-body="true">
                </div>
            </div>
        </div>
        <div class="tags clearfix">
            <div class="tags-wrapper" ng-show="laf.tags.length > 0">
                <span class="tags-label">Tags:</span>
                <span ng-repeat="tag in laf.tags">{{$index != 0 ? ', ' : ''}}{{tag.name}}</span>
            </div>
            <div class="add-tag-button dropdown-toggle">
                Добавить тег
            </div>
            <ul class="dropdown-menu">
                <li ng-repeat="category in categories">
                    {{category.name}}
                    <a ng-repeat="tag in category.tags" ng-click="addTag(tag)">{{tag.name}}</a>
                </li>
            </ul>
        </div>
        <div class="clearfix login-buttons">
            <button class="vk-login">Войти через аккаунт Vkontakte</button>
            <button class="fb-login">Войти через аккаунт Facebook</button>
        </div>
    </div>
</script>