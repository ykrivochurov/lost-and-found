/*!
 * Scrollbars v2.1.0
 * Copyright (c) 2013 Nathaniel Higgins; Licensed MIT
 * Built on 2013-08-20
 */
!function(a){"use strict";var b=Object.prototype.hasOwnProperty||window.hasOwnProperty;a.scrollbars=function(){return a("*").scrollbars()},a.fn.scrollbars=function(c){var d=a(document.body),e={xSpace:"auto",ySpace:"auto",forceScrollbars:!1,keyboardControl:!0,persistantSize:!0,overlap:!1,draggerSize:"auto",device:{touch:!1,blackberry:!1,other:!0},scrollbarAutohide:!1,dragContent:!1,mousewheelSupport:!0,mouseWheelMultiplier:1,xEnabled:!0,yEnabled:!0},f={rootElement:"scrollRoot",scrollElement:"scrollElement",dragCon:"dragCon",dragConX:"dragConX",dragConY:"dragConY",contentWrap:"contentWrap",rootWrap:"rootWrap",axisInUse:"axisInUse",axisInUseX:"axisInUseX",axisInUseY:"axisInUseY",dragger:"drag",draggerX:"dragX",draggerY:"dragY",contentDrag:"contentDrag",unselectable:"unselectable"},g={init:function(c){var d=this,f={opts:a.extend(e,c),obj:d,X:{},Y:{}},h=navigator.userAgent;if(f.device="ontouchstart"in document.documentElement?"touch":h.match(/blackberry/i)?"blackberry":"other",!f.opts.device[f.device])return!1;if(!f.opts.forceScrollbars){var i={overflow:d.css("overflow"),overflowX:d.css("overflow-x"),overflowY:d.css("overflow-y")},j=["overflow","overflowX","overflowY"],k=!1;for(var l in j)if(b.call(j,l)){var m=j[l];if("auto"===i[m]||"scroll"===i[m]){k=!0;break}}if(!k)return!1}var n=d.find("img"),o=n.length,p=0;return f.imgs={objs:n,len:o,load:p},g.setData.call(d,f),g.prePrepare.call(d),0===o?g.prepare.call(d):a.each(n,function(b,c){a(document.createElement("img")).on("load error",function(){var a=g.getData.call(d);return a.imgs.load=a.imgs.load+1,g.setData.call(d,a),a.imgs.load===a.imgs.len?g.prepare.call(d):void 0}).attr("src",c.src)})},prePrepare:function(){var a=this;"static"===a.css("position")&&a.css("position","relative"),a.addClass(f.scrollElement).addClass(f.rootElement)},prepare:function(){var b=this,c=g.getData.call(b),d=c.id="scroll-"+Math.floor(1e5*Math.random());b.addClass(d);var e,h=c.opts.xSpace,i=c.opts.ySpace;"auto"===h&&(e=a(document.createElement("div")).addClass(f.dragCon).addClass(f.scrollElement).addClass(f.dragConX).appendTo("body"),h=c.opts.xSpace=parseFloat(e.height()),e.remove()),"auto"===i&&(e=a(document.createElement("div")).addClass(f.dragCon).addClass(f.scrollElement).addClass(f.dragConY).appendTo("body"),i=c.opts.ySpace=parseFloat(e.width()),e.remove());var j=a(document.createElement("div")).addClass(f.contentWrap).addClass(f.scrollElement).addClass(d);b.wrapInner(j),j=c.contentWrap=b.find("."+[f.contentWrap,d,f.scrollElement].join("."));var k=a(document.createElement("div")).addClass(f.rootWrap).addClass(f.scrollElement).addClass(d);if(b.wrapInner(k),k=c.rootWrap=b.find("."+[f.rootWrap,d,f.scrollElement].join(".")),k.css({width:b.width(),height:b.height()}),c.opts.persistantSize&&a(window).resize(function(){g.update.apply(b)}),c.opts.keyboardControl){var l=c.tabindex=b.attr("tabindex");("undefined"==typeof l||0===l)&&b.attr("tabindex","-1")}g.setData.call(b,c);var m=0;return a.each({X:"width",Y:"height"},function(a,c){k[c]()<j[c]()&&(b.addClass(f["axisInUse"+a]),m+=1)}),0===m?(g.destroy.call(b),void 0):(c.opts.dragContent&&b.addClass(f.dragContent),c.opts.xEnabled&&g.generate.call(b,"X"),c.opts.yEnabled&&g.generate.call(b,"Y"),void 0)},generate:function(b){var c=this,d=g.getData.call(c),e=d.contentWrap,h=d.rootWrap,i=d.id;if(c.find("."+f["dragCon"+b]).length>0)return!1;d.X.dragCon&&d.Y.dragCon&&("X"===b?d.Y.dragCon.css({top:-d.opts.xSpace}):d.X.dragCon.css({left:-d.opts.xSpace}));var j=a(document.createElement("div")).addClass(f.scrollElement).addClass(i).addClass(f.dragCon).addClass(f["dragCon"+b]).appendTo(c);d[b].dragCon=j;var k=!1;if(k="X"===b?h.width()+d.opts.ySpace>=e.width():h.height()+d.opts.xSpace>=e.height())return g.destroy.call(c,b),!1;c.addClass(f["axisInUse"+b]),"X"===b?d.rootWrap.css({height:d.rootWrap.height()-d.opts.ySpace}):d.rootWrap.css({width:d.rootWrap.width()-d.opts.xSpace});var l=!d.opts.overlap&&c.hasClass(f.axisInUseX)&&c.hasClass(f.axisInUseY);d.overlapping=l,l&&("X"===b?j.css({left:-1*d.opts.ySpace}):j.css({top:-1*d.opts.xSpace}));var m;"auto"===d.opts.draggerSize?(m="X"===b?j.width()/e.width():j.height()/j.height(),m=Math.round(100*m)):m=parseFloat(d.opts.draggerSize),d.opts.draggerSize=m;var n=a(document.createElement("div")).addClass(f.scrollElement).addClass(f.dragger).addClass(i).addClass(f["dragger"+b]).attr("unselectable","on").appendTo(j);return d[b].dragger=n,"X"===b?n.css({left:d.opts.ySpace,width:m+"%"}):n.css({top:d.opts.xSpace,height:m+"%"}),d.opts.scrollbarAutohide&&n.parent().fadeTo(0,0),g.setData.call(c,d),g.addEvents.call(c,b)},addEvents:function(b){var c=this,e=g.getData.call(c),h=e[b].dragCon,i=e[b].dragger;"undefined"==typeof e.eventsAdded&&(e.eventsAdded={});var j={draggerMousedown:[i,"mousedown",function(a,b,c){a.preventDefault();var e=g.getData.call(b);e.activeAxis=c,e.activePosition="X"===c?a.pageX:a.pageY,g.setData.call(b,e),d.addClass("normalScrollingActive"),d.addClass(f.unselectable),a.preventDefault()}],draggerOnSelectStart:[i,"selectstart",function(a){a.preventDefault()}],starMousemove:[a(document),"mousemove",function(a,b){var c=g.getData.call(b),d=c.activeAxis,e=c.activePosition;if(d&&e){var f=c.activePosition="X"===d?a.pageX:a.pageY,h=f-e;g.move.call(b,h,d),g.setData.call(b,c)}},"*"],starMouseup:[a(document),"mouseup",function(b,c){var e=a.extend({},g.getData.call(c),{activeAxis:!1,activePos:!1});g.setData.call(c,e),d.removeClass("normalScrollingActive"),d.removeClass(f.unselectable)},"*"],dragConMousedown:[h,"mousedown",function(b,c,d){if(!a(b.target).hasClass(f.dragger)){var e,h,i,j=a(this).children().eq(0),k=j.offset();"X"===d?(e=k.left,h=b.pageX,i=j.width()):(e=k.top,h=b.pageY,i=j.height());var l=h>e?i:-i;g.move.call(c,l,d)}}]};e.opts.keyboardControl&&(j.objKeydown=[c,"keydown",function(a,b){switch(a.which){case 37:g.moveContent.call(b,-20,"X");break;case 38:g.moveContent.call(b,-20,"Y");break;case 39:g.moveContent.call(b,20,"X");break;case 40:g.moveContent.call(b,20,"Y");break;case 33:g.moveContent.call(b,-b.height(),"Y");break;case 34:g.moveContent.call(b,b.height(),"Y")}}]),e.opts.dragContent&&(j.contentMousedown=[e.contentWrap,"mousedown",function(a,b){var c={contentActiveX:a.pageX,contentActiveY:a.pageY};d.addClass("contentDragActive"),g.setData.call(b,c),b.focus(),a.preventDefault()}],j.contentMousemove=[a("*"),"mousemove",function(a,b){var c=g.getData.call(b);if(c.contentActiveX&&c.contentActiveY){var d=c.contentActiveX,e=c.contentActiveY,f=c.contentActiveX=a.pageX,h=c.contentActiveY=a.pageY,i=f-d,j=h-e;g.moveContent.call(b,-i,"X"),g.moveContent.call(b,-j,"Y"),g.setData.call(b,c)}}],j.contentMouseup=[a("*"),"mouseup",function(a,b){var c={contentActiveX:!1,contentActiveY:!1};g.setData.call(b,c),d.removeClass("contentDragActive")}]),e.opts.scrollbarAutohide&&(e=g.getData.call(c),j.objMouseEnter=[a(".scrollElement."+e.id),"mouseenter",function(a,b){var c=g.getData.call(b);c.X.dragCon.stop().fadeTo(500,1),c.Y.dragCon.stop().fadeTo(500,1)}],j.objMouseOut=[c,"mouseout",function(a,b){var c=g.getData.call(b);c.X.dragCon.stop().fadeTo(500,0),c.Y.dragCon.stop().fadeTo(500,0)}]),a.fn.mousewheel&&e.opts.mousewheelSupport&&(j.objMousewheel=[c,"mousewheel",function(a,b,c){var d=g.getData.call(b),e=-c[1],f=0!==c[2]?"X":"Y",h=0>e?-3:e>0?3:0;h*=d.opts.mouseWheelMultiplier,g.move.call(b,h,f),a.preventDefault()}]),a.each(j,function(b,d){var e=d[0],f=d[1],g=d[2],h=d[3],i=[f];h&&i.push(h),i.push(function(b){var d,e=b.target.className.split(" "),f=arguments;return a.each(e,function(a,b){var c=b.match(/.*?X/),e=b.match(/.*?Y/);return c&&e?!1:(c?d="X":e&&(d="Y"),void 0)}),d?g.call(a(this),b,c,d,f):g.call(a(this),b,c,f)}),e.on.apply(e,i)})},moveContent:function(a,b){var c=this,d=g.getData.call(this),e=d[b].dragCon,f=d[b].dragger,h=d.rootWrap,i=d.contentWrap;if(!f)return!1;var j="X"===b?f.width():f.height(),k="X"===b?e.css("left"):e.css("top");k="auto"===k?0:-parseFloat(k);var l="X"===b?e.width()-k:e.height()-k,m="X"===b?i.width():i.height(),n="X"===b?h.width():h.height(),o=l-j,p=m-n,q=p/o;g.move.call(c,a/q,b)},move:function(b,c,d){var e=this,f={moveMethod:"distance",moveType:"pixels"},h=a.extend(f,d),i=g.getData.call(e),j=i[c].dragCon,k=i[c].dragger,l=i.rootWrap,m=i.contentWrap;if(!j||!k)return!1;var n,o,p,q="X"===c?j.css("left"):j.css("top");q="auto"===q?0:-parseFloat(q);var r="X"===c?j.width()-q:j.height()-q,s="X"===c?k.width():k.height(),t="X"===c?l.width():l.height(),u="X"===c?m.width():m.height(),v=q,w=r+q-s;"position"===h.moveMethod?n="percent"===h.moveType?100*(b/r):b:(o="X"===c?k.css("left"):k.css("top"),o="auto"===o?v:parseFloat(o),"percent"===h.moveType?(p=100*(b/r),n=o+p):n=o+b),n=Math.max(v,Math.min(w,n)),"X"===c?k.css("left",n):k.css("top",n);var x=r-s,y=u-t,z=y/x;n===w&&(n-=1);var A=(n-q)*z;"X"===c?m.css({left:-A}):m.css({top:-A})},getScrollPos:function(a,b){var c=this,d=g.getData.call(c),e=d[a].dragger,f=d[a].dragCon,h="X"===a?e.css("left"):e.css("top");h="auto"===h?0:parseFloat(h);var i="X"===a?f.width():f.height(),j="X"===a?e.width():e.height();b&&(h+=j);var k=100*(h/i);return k},destroy:function(a,c){"undefined"==typeof c&&(c=!0);var d=this,e=g.getData.call(d);if(!e)return!1;if(a&&(d.removeClass(f["axisInUse"+a]).find("."+f["dragCon"+a]).filter("."+e.id).remove(),"X"===a?(e.rootWrap.css({height:"100%"}),e.Y.dragCon&&e.Y.dragCon.css({top:0})):(e.rootWrap.css({width:"100%"}),e.X.dragCon&&e.X.dragCon.css({left:0}))),c&&(!a||!d.hasClass(f.axisInUseX)&&!d.hasClass(f.axisInUseY))){d.html(e.contentWrap.html());for(var h in f)b.call(f,h)&&d.removeClass(f[h]);e.tabindex?d.attr("tabindex",e.tabindex):d.removeAttr("tabindex"),d.removeClass(e.id),g.removeData.call(this)}},setData:function(a){return this.data("jQSData",a)},getData:function(){return this.data("jQSData")},removeData:function(){return this.removeData("jQSData")},update:function(){var b=this,c=g.getData.call(b);c.rootWrap.css({width:b.width()-c.opts.ySpace,height:b.height()-c.opts.xSpace}),a.each({X:"width",Y:"height"},function(a,d){c.rootWrap[d]()<c.contentWrap[d]()?g.generate.call(b,a):g.destroy.call(b,a,!1);try{g.move.call(b,g.getScrollPos.call(b,a),a)}catch(e){}})}},h=a.makeArray(arguments);if(g[c]){var i=[],j=this.each(function(){var b=g[c].apply(a(this),h.slice(1));b&&i.push(b)});return i.length<1?j:i.length>1?i:i[0]}return"object"!=typeof c&&c?(a.error("No such method "+c+" on jQuery.scrollbars"),void 0):this.each(function(){g.init.apply(a(this),h)})}}(jQuery);